<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng tin tuyển dụng việc làm miễn phí, nhanh chóng</title>
    <link rel="stylesheet" href="/css/ntd/post_job_ntd.css" as="style" >
    <link rel="stylesheet" href="/css/common.css" as="style" >
    <link rel="stylesheet" href="/css/leftnav_ntd.css" as="style" >
    <link rel="stylesheet" href="/css/header_ntd.css" as="style" >
    <link rel="stylesheet" href="/css/footer.css" as="style" >
    <link rel="stylesheet" href="/css/custom_select2.css" as="style" >
    <script src="/js/jquery.min.js"></script>
</head>

<body>
    <div class="cnt">
        <div class="cnt-left" id="leftNav">
            <%- include('../layouts/leftnav_ntd', {}); %>
        </div>
        <div class="cnt-right" id="rightContent">
            <%- include('../layouts/header_ntd', {}); %>
            <div class="cnt-det">
                <div class="cnt-top d-flex justify-b">
                    <div class="cnt-info bg-white d-flex align-c">
                        <div class="cnt-avar rounded-circle">
                            <img class="rounded-circle" src="/images/img/cskh_image.jpg" width="114" height="114" alt="Logo CSKH">
                        </div>
                        <div class="cnt-gen fw-600">
                            <div class="cnt-gen-name mb-20px">
                                Chuyên viên hỗ trợ: <span class="color-main">Mrs. Nguyễn Hồng</span>
                            </div>
                            <div class="cnt-gen-phone mb-20px">
                                SĐT - Zalo: <span class="color-main">0123456789</span>
                            </div>
                            <div class="cnt-gen-mail">
                                Email: <span class="color-alert">nguyenhongg2609@gmail.com</span>
                            </div>
                        </div>
                    </div>
                    <div class="cnt-ban d-flex align-c">
                        <div class="cnt-ban-tit fw-700 color-white text-c">
                            Tuyển dụng nhanh, tuyển dụng hiệu quả, đăng tin miễn phí
                        </div>
                        <div class="cnt-ban-logo">
                            <img src="/images/logo/biglogo.svg" width="250" height="107" alt="Logo Image">
                        </div>
                    </div>
                </div>
                <div class="cnt-form bg-white">
                    <div class="cnt-form-head">
                        <div class="cnt-form-tit fw-700 mb-12px">
                            Đăng tin tuyển dụng miễn phí
                        </div>
                        <div class="cnt-form-des" style="display: none;">
                            <span class="color-alert fw-600">Lưu ý:</span> Tính năng Đăng tin miễn phí chỉ dành cho khách hàng chưa từng có tài khoản trên TopCv1s. Nếu bạn đã có tài khoản, vui lòng đăng nhập và đăng tin trên trang Dịch vụ của TopCv1s tại <a href="" class="color-main">ĐÂY</a>
                        </div>
                    </div>
                    <div class="cnt-form-body d-flex flex-dr-c">
                        <div class="cnt-item">
                            <div class="cnt-tit fw-700 color-main">
                                Thông tin việc làm
                            </div>
                            <div class="cnt-cont">
                                <div class="cnt-linp mb-20px">
                                    <label for="pos_job">
                                        Vị trí đăng tuyển <span class="color-alert">*</span>
                                    </label>
                                    <div class="cnt_input">
                                        <input type="text" id="post_job" placeholder="Ví dụ: Nhân viên kinh doanh, Nhân viên hành chính nhân sự">
                                    </div>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="lev_job">
                                        Cấp bậc <span class="color-alert">*</span>
                                    </label>
                                    <select id="level_id">
                                        <option></option>
                                        <% if (levelList && levelList.length > 0) { %>
                                            <% levelList.forEach(function(item, index) { %>
                                                <% for (const key in item) { %>
                                                    <option value="<%= key %>"><%= item[key] %></option>
                                                <% } %>
                                            <% }); %>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="caarer_job">
                                        Ngành nghề <span class="color-alert">*</span>
                                    </label>
                                    <select id="cat_id" name="cat_box[]" multiple="multiple">
                                        <option></option>
                                        <% if (cateList && cateList.length > 0) { %>
                                            <% cateList.forEach(function(item) { %>
                                                <option value="<%= item.cat_id %>"><%= item.cat_name %></option>
                                            <% }); %>
                                        <% }  %>
                                    </select>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="city_job">
                                        Tỉnh thành làm việc <span class="color-alert">*</span>
                                    </label>
                                    <select id="city_job">
                                        <option></option>
                                        <% if (listCities && listCities.length > 0) { %>
                                            <% listCities.forEach(function(item) { %>
                                                <option value="<%= item.cit_id %>"><%= item.cit_name %></option>
                                            <% }); %>
                                        <% }  %>
                                    </select>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="distric_job">
                                        Quận huyện làm việc <span class="color-alert">*</span>
                                    </label>
                                    <select id="distric_job">
                                        <option></option>
                                    </select>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="loc_job">
                                        Địa chỉ chi tiết làm việc <span class="color-alert">*</span>
                                    </label>
                                    <div class="cnt_input">
                                        <input type="text" id="loc_job" placeholder="Bạn vui lòng nhập địa chỉ làm việc chi tiết">
                                    </div>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="loc_job">
                                        Hình thức làm việc <span class="color-alert">*</span>
                                    </label>
                                    <select id="typew_id">
                                        <option></option>
                                        <% if (listTypeWork && listTypeWork.length > 0) { %>
                                            <% listTypeWork.forEach(function(item, index) { %>
                                                <% for (const key in item) { %>
                                                    <option value="<%= key %>"><%= item[key] %></option>
                                                <% } %>
                                            <% }); %>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="wage_job">
                                        Mức lương <span class="color-alert">*</span>
                                    </label>
                                    <select id="monyr_id">
                                        <option></option>
                                        <% if (listRangeMoney && listRangeMoney.length > 0) { %>
                                            <% listRangeMoney.forEach(function(item, index) { %>
                                                <% for (const key in item) { %>
                                                    <option value="<%= key %>"><%= item[key] %></option>
                                                <% } %>
                                            <% }); %>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="nbpos_job">
                                        Số lượng cần tuyển <span class="color-alert">*</span>
                                    </label>
                                    <div class="cnt_input">
                                        <input type="number" min="1" id="nbpos_job" placeholder="Nhập số lượng">
                                    </div>
                                </div>
                                <div class="cnt-linp mb-20px">
                                    <label for="trial_job">
                                        Thời gian thử việc (nếu có)
                                    </label>
                                    <div class="cnt_input">
                                        <input type="text" id="trial_job" placeholder="VD: 3 tuẩn, 5 tuần, ...">
                                    </div>
                                </div>
                                <div class="cnt-linp">
                                    <label for="comis_job">
                                        Hoa hồng (Nếu có)
                                    </label>
                                    <div class="cnt_input">
                                        <input type="text" id="comis_job" placeholder="VD: 25%, 35%, ...">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cnt-item">
                            <div class="cnt-tit fw-700 color-main">
                                Mô tả công việc
                            </div>
                            <div class="cnt-cont">
                                <div class="cnt-linp">
                                    <label for="des_job">
                                        Mô tả công việc <span class="color-alert">*</span>
                                    </label>
                                    <textarea id="des_job" placeholder="- Tiêu đề cho vị trí công việc cần tuyển dụng là gì?
                                    - Mục tiêu của vị trí công việc: “Vị trí này tồn tại để làm gì cho công ty?”
                                    - Các nhiệm vụ chính của vị trí công việc là gì?
                                    - Địa chỉ nơi làm việc
                                    - nội dụng công việc cần thực hiện: ..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="cnt-item">
                            <div class="cnt-tit fw-700 color-main">
                                Yêu cầu công việc
                            </div>
                            <div class="cnt-cont">
                                <div class="cnt-linp mb-20px">
                                    <label for="exp_job">
                                        Kinh nghiệm <span class="color-alert">*</span>
                                    </label>
                                    <select id="exp_id">
                                        <option></option>
                                        <% if (listSizeExp && listSizeExp.length > 0) { %>
                                            <% listSizeExp.forEach(function(item, index) { %>
                                                <% for (const key in item) { %>
                                                    <option value="<%= key %>"><%= item[key] %></option>
                                                <% } %>
                                            <% }); %>
                                        <% } %>
                                    </select>
                                </div>
                                <div class="cnt-linp-row d-flex mb-20px">
                                    <div class="cnt-linp">
                                        <label for="edu_req">
                                            Yêu cầu bằng cấp <span class="color-alert">*</span>
                                        </label>
                                        <select id="edu_id">
                                            <option></option>
                                            <% if (listEdu && listEdu.length > 0) { %>
                                                <% listEdu.forEach(function(item, index) { %>
                                                    <% for (const key in item) { %>
                                                        <option value="<%= key %>"><%= item[key] %></option>
                                                    <% } %>
                                                <% }); %>
                                            <% } %>
                                        </select>
                                    </div>
                                    <div class="cnt-linp">
                                        <label for="gender_req">
                                            Giới tính <span class="color-alert">*</span>
                                        </label>
                                        <select id="gen_id">
                                            <option></option>
                                            <% if (genderList && genderList.length > 0) { %>
                                                <% genderList.forEach(function(item, index) { %>
                                                    <% for (const key in item) { %>
                                                        <option value="<%= key %>"><%= item[key] %></option>
                                                    <% } %>
                                                <% }); %>
                                            <% } %>
                                        </select>
                                    </div>
                                </div>
                                <div class="cnt-linp">
                                    <label for="job_req">
                                        Yêu cầu công việc <span class="color-alert">*</span>
                                    </label>
                                    <textarea id="job_req" placeholder="- Trách nhiệm của nhân viên cần làm là gì?
                                    - Nhiệm vụ công việc cần thực hiện hàng ngày là gì?
                                    - Những kỹ năng nào cần có để thực hiện công việc tốt nhất?
                                    + Những kỹ năng bắt buộc (Những kỹ năng cần có là gì?)
                                    + Những kỹ năng mang tính khuyến khích (Ngoài ra ưng viên có thể đáp ứng những kỹ năng nào để phát triển công việc tốt nhất?)
                                    - Bằng cấp, chứng chỉ phù hợp với công việc
                                    - Yêu cầu về kinh nghiệm, thái độ, phầm chất
                                    - Ngoài ra tùy vào đặc thù công việc tuyển dụng để nêu ra các yêu cầu khác như giới tính, ngoại hình,..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="cnt-item">
                            <div class="cnt-tit fw-700 color-main">
                                Quyền lợi được hưởng
                            </div>
                            <div class="cnt-cont">
                                <div class="cnt-linp">
                                    <label for="bene_job">
                                        Quyền lợi được hưởng <span class="color-alert">*</span>
                                    </label>
                                    <textarea id="bene_job" placeholder="- Chế độ về mức lương, thưởng, chế độ đãi ngộ
                                    - Các chế độ đóng bảo hiểm xã hội và phúc lợi khác của nhân viên cụ thể là gì?
                                    - Môi trường làm việc của công ty hấp dẫn như thế nào? Có thể mang đến những cơ hội học tập, huấn luyện cho ứng viên ra sao?
                                    - Cơ hội thăng tiến của nhân viên là như thế nào?"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="cnt-item">
                            <div class="cnt-tit fw-700 color-main">
                                Yêu cầu hồ sơ
                            </div>
                            <div class="cnt-cont">
                                <div class="cnt-linp mb-20px">
                                    <label for="required_cv">
                                        Hồ sơ bao gồm <span class="color-alert">*</span>
                                    </label>
                                    <textarea id="required_cv" placeholder="- Đơn xin việc.
                                    - Sơ yếu lý lịch.
                                    - Hộ khẩu, chứng minh nhân dân và giấy khám sức khoẻ.
                                    - Các bằng cấp có liên quan."></textarea>
                                </div>
                                <div class="cnt-linp">
                                    <label for="deadline_cv">
                                        Hạn nộp <span class="color-alert">*</span>
                                    </label>
                                    <div class="cnt_input">
                                        <input id="deadline_cv" type="date" placeholder="dd/mm/yyyy" min="<%= new Date().toISOString().slice(0, 10) %>">
                                    </div>
                                    <span id="error-message" style="color:red; display:none;">Hạn nộp phải lớn hơn thời gian hiện tại.</span>
                                </div>
                            </div>
                        </div>
                        <div class="cnt-item">
                            <div class="cnt-tit fw-700 color-main">
                                Thông tin liên hệ
                            </div>
                            <div class="cnt-cont">
                                <div class="cnt-linp-row d-flex mb-20px">
                                    <div class="cnt-linp">
                                        <label for="contact_per">
                                            Tên người liên hệ <span class="color-alert">*</span>
                                        </label>
                                        <div class="cnt_input">
                                            <input type="text" id="contact_per" placeholder="Nhập tên người liên hệ">
                                        </div>
                                    </div>
                                    <div class="cnt-linp">
                                        <label for="contact_loc">
                                            Địa chỉ liên hệ <span class="color-alert">*</span>
                                        </label>
                                        <div class="cnt_input">
                                            <input type="text" id="contact_loc" placeholder="Nhập địa chỉ liên hệ">
                                        </div>
                                    </div>
                                </div>
                                <div class="cnt-linp-row d-flex">
                                    <div class="cnt-linp">
                                        <label for="contact_phone">
                                            Số điện thoại liên hệ <span class="color-alert">*</span>
                                        </label>
                                        <div class="cnt_input">
                                            <input type="text" id="contact_phone" placeholder="Nhập số điện thoại liên hệ">
                                        </div>
                                    </div>
                                    <div class="cnt-linp">
                                        <label for="contact_email">
                                            Email liên hệ <span class="color-alert">*</span>
                                        </label>
                                        <div class="cnt_input">
                                            <input type="email" id="contact_email" placeholder="Nhập email liên hệ">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="cnt-act-btn d-flex justify-c gap-4">
                            <button class="cnt-cancel bg-white color-main fw-600">Hủy tạo tin</button>
                            <button class="cnt-post bg-main color-white fw-600">Đăng tin</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="post-conf modal">
            <div class="modal-content">
                <div class="modal-header">
                    <img src="/images/icon/ic_question.svg" width="56" height="56" alt="icon">
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="tx-cof">Tăng hiệu quả tuyển dụng bằng cách sử dụng dịch vụ ghim tin. Bạn có muốn ghim tin này không ?</div>
                </div>
                <div class="modal-footer">
                    <div class="modal-act">
                        <button class="default_post post-btn">Tiếp tục đăng tin</button>
                        <button class="gim_post post-btn">Đăng tin và sử dụng gói ghim tin</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <%- include('../layouts/footer', {}); %>
    <script src="/js/custom_select.js"></script>
    <script>
        $(document).ready(function() {
            $(window).scroll(function() {
                var $leftNav = $('.lnav');
                var $rightContent = $('#rightContent');
                var rightContentHeight = $rightContent.outerHeight(true);
                var rightContentOffsetTop = $rightContent.offset().top;
                var rightContentBottom = rightContentOffsetTop + rightContentHeight;
                var scrollTop = $(window).scrollTop();
                var windowHeight = $(window).height();
                var leftNavHeight = $leftNav.outerHeight(true);
                if (scrollTop + leftNavHeight > rightContentBottom) {
                    $leftNav.css({
                        position: 'absolute',
                        top: (rightContentHeight - leftNavHeight) + 'px'
                    });
                } else {
                    $leftNav.css({
                        position: 'fixed',
                        top: '0'
                    });
                }
            });
        });
    </script>
    <script>
        $(document).ready(function() {
            $('.nhead-rig-togm').click(function() {
                $('#mobileMenu').slideDown(300);
            });
            $('.menu-mb-close').click(function() {
                $('#mobileMenu').slideUp(300);
            });
            const $deadlineInput = $('#deadline_cv');
            const $errorMessage = $('#error-message');

            $deadlineInput.on('input', function() {
                const selectedDate = new Date($(this).val());
                const currentDate = new Date();
                currentDate.setHours(0, 0, 0, 0); 

                if (selectedDate < currentDate) {
                    $errorMessage.show(); 
                } else {
                    $errorMessage.hide(); 
                }
            });
        });
        $(document).ready(function() {
            $(".tog-mb").click(function() {
                $(this).next(".menu-mb-clist").slideToggle();
            });
        });
        $(document).ready(function(){
            var modal = $(".post-conf");

            var close_modal = $(".close");

            close_modal.click(function() {
                modal.css("display", "none");
            });

            $(window).click(function(event) {
                if ($(event.target).is(modal)) {
                    modal.css("display", "none");
                }
            });
        });
        $(document).ready(function() {
            let usc_name = getCookieNew("usc_name");
            let usc_name_add = getCookie("usc_name_add");
            let usc_name_email = getCookie("usc_name_email");
            let usc_name_phone = getCookie("usc_name_phone");

            usc_name = usc_name === 'undefined' ? '' : usc_name;
            usc_name_add = usc_name_add === 'undefined' ? '' : usc_name_add;
            usc_name_email = usc_name_email === 'undefined' ? '' : usc_name_email;
            usc_name_phone = usc_name_phone === 'undefined' ? '' : usc_name_phone;

            $("#contact_per").val(usc_name);
            $("#contact_loc").val(usc_name_add);
            $("#contact_phone").val(usc_name_phone);
            $("#contact_email").val(usc_name_email);

            $('#level_id').CustomSelect({
                placeholder: 'Cấp bậc mong muốn',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#edu_req').CustomSelect({
                placeholder: 'Select an option',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#cat_id').CustomSelect({
                placeholder: 'Chọn ngành nghề',
                searchPlaceholder: 'Tìm kiếm...',
                multiple: true,
                maxItems: 3
            });
            $('#typew_id').CustomSelect({
                placeholder: 'Chọn hình thức làm việc',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#monyr_id').CustomSelect({
                placeholder: 'Chọn mức lương',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#exp_id').CustomSelect({
                placeholder: 'Chọn kinh nghiệm',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#edu_id').CustomSelect({
                placeholder: 'Chọn bằng cấp',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#gen_id').CustomSelect({
                placeholder: 'Chọn giới tính',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#city_job').CustomSelect({
                placeholder: 'Chọn tỉnh thành',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#distric_job').CustomSelect({
                placeholder: 'Chọn quận / huyện',
                searchPlaceholder: 'Tìm kiếm...'
            });
            $('#city_job').change(function() {
                var id = parseInt($(this).val());
                $.ajax({
                    url: '/api/getDistrict',
                    method: 'POST',
                    data: { id: id },
                    success: function(response) {
                        if (response.district.length > 0) {
                            $('#distric_job').empty();
                            response.district.forEach(function(city) {
                                $('#distric_job').append('<option value="' + city.cit_id + '">' + city.cit_name + '</option>');
                            });
                            $('#distric_job').trigger('update');
                        }
                    },
                    error: function(err) {
                        console.error('Error:', err);
                    }
                });
            });
            $('#cat_id').change(function() {
                var id = parseInt($(this).val());
                $.ajax({
                    url: '/api/getTagCate',
                    method: 'POST',
                    data: { id: id },
                    success: function(response) {
                        $('#tag_cate').empty();
                        response.tag.forEach(function(tag) {
                            $('#tag_cate').append('<option value="' + tag.tag_id + '">' + tag.tag_name + '</option>');
                        });

                        $('#tag_cate').trigger('update'); 
                    },
                    error: function(err) {
                        console.error('Error:', err);
                    }
                });
            });
            function getSelectedValuesById(selectId) {
                var selectedValues = [];
                var containerSelector = '#' + selectId + ' + .custom-select-wrapper .selected-options-container';
                $(containerSelector + ' .selected-option').each(function() {
                    var value = $(this).data('value');
                    selectedValues.push(value);
                });
                return selectedValues;
            }
            $('.cnt-post').click(function() {
                var check = true;
                var post_job = $('#post_job').val();
                var level_id = $('#level_id').val();
                var cat_id = getSelectedValuesById('cat_id');
                var tag_cate= getSelectedValuesById('tag_cate');
                var city_job = $('#city_job').val();
                var distric_job = $('#distric_job').val();
                var loc_job = $('#loc_job').val();
                var typew_id = $('#typew_id').val();
                var monyr_id = $('#monyr_id').val();
                var nbpos_job = $('#nbpos_job').val();
                var trial_job = $('#trial_job').val();
                var comis_job = $('#comis_job').val();
                var des_job = $('#des_job').val();
                var exp_id = $('#exp_id').val();
                var edu_id = $('#edu_id').val();
                var gen_id = $('#gen_id').val();
                var job_req = $('#job_req').val();
                var bene_job = $('#bene_job').val();
                var required_cv = $('#required_cv').val();
                var deadline_cv = $('#deadline_cv').val();
                var contact_per = $('#contact_per').val();
                var contact_loc = $('#contact_loc').val();
                var contact_phone = $('#contact_phone').val();
                var contact_email = $('#contact_email').val();
                if(!post_job) {
                    alert("Chưa nhập vị trí đăng tuyển"); 
                    check = false;
                } else if(!level_id) {
                    alert("Chưa chọn cấp bậc"); 
                    check = false;
                } else if(cat_id.length == 0) {
                    alert("Chưa chọn ngành nghề"); 
                    check = false;
                } else if(!city_job) {
                    alert("Chưa chọn tỉnh thành làm việc"); 
                    check = false;
                } else if(!distric_job) {
                    alert("Chưa chọn quận huyện làm việc"); 
                    check = false;
                } else if(!loc_job) {
                    alert("Chưa nhập địa chỉ chi tiết làm việc"); 
                    check = false;
                } else if(!typew_id) {
                    alert("Chưa chọn hình thức làm việc"); 
                    check = false;
                } else if(!monyr_id) {
                    alert("Chưa chọn mức lương"); 
                    check = false;
                } else if(!nbpos_job || !Number.isInteger(parseInt(nbpos_job)) || parseInt(nbpos_job) <= 0) {
                    alert("Chưa chọn số lượng cần tuyển hoặc số lượng không hợp lệ"); 
                    check = false;
                } else if(!des_job) {
                    alert("Chưa nhập mô tả công việc"); 
                    check = false;
                } else if(!exp_id) {
                    alert("Chưa chọn kinh nghiệm"); 
                    check = false;
                } else if(!edu_id) {
                    alert("Chưa chọn yêu cầu bằng cấp"); 
                    check = false;
                } else if(!gen_id) {
                    alert("Chưa chọn giới tính"); 
                    check = false;
                } else if(!job_req) {
                    alert("Chưa nhập yêu cầu công việc"); 
                    check = false;
                } else if(!bene_job) {
                    alert("Chưa nhập quyền lợi được hưởng"); 
                    check = false;
                } else if(!required_cv) {
                    alert("Chưa nhập hồ sơ bao gồm"); 
                    check = false;
                } else if(!contact_per) {
                    alert("Chưa nhập tên người liên hệ"); 
                    check = false;
                } else if(!contact_loc) {
                    alert("Chưa nhập địa chỉ liên hệ"); 
                    check = false;
                } else if(!contact_phone) {
                    alert("Chưa nhập số điện thoại liên hệ"); 
                    check = false;
                } else if(!contact_email) {
                    alert("Chưa nhập email liên hệ"); 
                    check = false;
                } 
                if (!check) {
                    $btn.prop('disabled', false);
                    $(".post-conf").css("display", "none");
                    return;
                }
                $(".post-conf").css("display", "block");
                var type = 1;
                $(".default_post").off('click').click(function() {
                    type = 1;
                    console.log(type);
                });
                $(".gim_post").off('click').click(function() {
                    type = 2;
                    console.log(type);
                });
                $('.post-btn').off('click').click(function() {
                    var $btn = $(this);
                    if ($btn.prop('disabled')) {
                        return;
                    }
                    $btn.prop('disabled', true); 
                    $.ajax({
                        url: 'http://localhost:3050/api/topcv1s/new/postNew',
                        headers: {
                            Authorization: 'Bearer ' + getCookie('accessToken')
                        },
                        method: 'POST',
                        data: {
                            title: post_job,
                            capBac: parseInt(level_id),
                            catId: cat_id.join(','),
                            tag: tag_cate.join(','),
                            city: parseInt(city_job),
                            district: parseInt(distric_job),
                            address: loc_job,
                            hinhThuc: parseInt(typew_id),
                            money: parseInt(monyr_id),
                            soLuong: parseInt(nbpos_job),
                            thuViec: trial_job,
                            hoaHong: comis_job,
                            moTa: des_job,
                            exp: parseInt(exp_id),
                            bangCap: parseInt(edu_id),
                            gioiTinh: parseInt(gen_id),
                            yeuCau: job_req,
                            quyenLoi: bene_job,
                            hoSo: required_cv,
                            hanNop: deadline_cv,
                            userContact: contact_per,
                            addressContact: contact_loc,
                            phoneContact: contact_phone,
                            emailContact: contact_email,
                        },
                        success: function(response) {
                            $(".post-conf").css("display", "none");
                            alert('Đăng tin thành công');
                            if (type == 1) {
                                window.location.href = "/ntd/quan-ly-tin-dang";
                            } else {
                                window.location.href = "/ntd/quan-ly-diem-loc";
                            }
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            console.error('AJAX Error:', textStatus, errorThrown);
                            $(".post-conf").css("display", "none");
                            var response = jqXHR.responseJSON;
                            if (response && response.error) {
                                alert('Đăng tin thất bại: '+ response.error.message);
                            } else {
                                alert('Có lỗi xảy ra');
                            }
                        },
                        complete: function() {
                            $btn.prop('disabled', false);
                        }
                    });
                });
            });
            function getCookie(name) {
                var value = "; " + document.cookie;
                var parts = value.split("; " + name + "=");
                if (parts.length === 2) return parts.pop().split(";").shift();
            }
            function getCookieNew(name) {
                const nameEQ = name + "=";
                const ca = document.cookie.split(';');
                for(let i = 0; i < ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) == 0) return decodeURIComponent(c.substring(nameEQ.length, c.length));
                }
                return null;
            }
        });
    </script>
</body>

</html>